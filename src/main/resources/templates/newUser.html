<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <link href="../css/bootstrap.min.css" type="text/css" rel="stylesheet" />
    <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.css" />
    <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid-theme.min.css" />

    <script src="../js/jquery.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.js"></script>
    <script src="../js/UserManagement.js"></script>

    <title>EyeReturn Marketing - User Management System</title>
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Home</a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li><a href="/allusers" ><span class="glyphicon glyphicon-user"></span> All Users</a></li><!--th:onclick="'getAllUsers()'"-->
                <li><a href="/newuser"><span class="glyphicon glyphicon-plus"></span> New User</a></li>
                <li><a href="#"><span class="glyphicon glyphicon-calendar-"></span>Average Age</a></li>
            </ul>
        </div>
    </div>
</nav>
<br/>
<br/>
<div class="container" style="margin-top: 5%">

</div>
    <form id="userform">
        <div class="form-group">
            <h2 class="form-signin-heading">Create New User</h2>
            <input type="text" id="firstName" class="form-control" placeholder="First Name" required="true"/>
            <input type="text" id="lastName" class="form-control" placeholder="Last Name" required="true" />
            <input type="number" id="phoneNumber" class="form-control" th:size="10" th:maxlength="10" placeholder="Phone Number" required="true" />
            <input type="email" id="email" class="form-control" placeholder="Email address" required="true" />
            <input type="text" id="dateOfBirth" class="form-control" placeholder="Date of birth" required="true" />

            <button class="btn btn-lg btn-primary btn-block" type="submit" id="submit">Add User</button>
        </div>
    </form>


<script type="text/javascript">

    $("#submit").on('click', function(){

        $.ajax({
            url: '../users/new',
            type : "POST",
            dataType : 'json', // data type
            data : $("#userform").serialize(),
            success : function(result) {

                console.log(result);
            },
            error: function(xhr, resp, text) {
                console.log(xhr, resp, text);
            }
        })
    });
    /*console.log("inside function");;
    $("#userform").submit(function(event) {

        event.preventDefault();
        var url = "../users/new";
        var posting = $.post( url, { firstName: $('#firstName').val(), lastName: $('#lastName').val() ,
            phoneNumber: $('#phoneNumber').val(), email: $('#email').val(), dateOfBirth: $('#phoneNumber').val()} );
        posting.done(function( data ) {
            alert('success');
        });
        /!*$.ajax({
         type: "POST",
         url: url,
         dataType: "json",
         data: $("#idForm").serialize(),
         success: function(data)
         {
         console.log(data.message);
         }
         });*!/
    });*/
</script>
</body>
</html>